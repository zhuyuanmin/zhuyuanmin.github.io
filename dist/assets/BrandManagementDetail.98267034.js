import{u as C,b1 as D,r as _,a as E,o as L,b as i,c as b,H as d,J as M,f as e,d as o,h as l,g as I,i as w,G as N,j as g,b2 as S,b3 as U}from"./index.4123b150.js";import{E as V}from"./el-card.4da2fcf1.js";import{E as h,H as z,g as A}from"./el-button.94108e53.js";import{E as F,S as T}from"./SearchComp.cf0432e5.js";/* empty css                */import{d as $,a as n}from"./api.b5d4f119.js";import{v as j,e as G,a as H}from"./brand.59dab806.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./el-form-item.a6c605e5.js";import"./el-checkbox.39e08c8e.js";import"./el-select.e8a281ab.js";import"./el-popper.ef829556.js";/* empty css                       */const J=c=>(S("data-v-d9517938"),c=c(),U(),c),K={class:"content-card"},P={class:"card-header"},Y=g("\u8FD4\u56DE"),Q={class:"box"},W={class:"left"},X=J(()=>d("p",null,"\u8BF7\u4E0A\u4F20\u56FE\u7247",-1)),Z=["src"],ee={class:"right"},ae={key:0,class:"btn-bottom-list"},te=g("\u4FDD\u5B58"),se=g("\u8FD4\u56DE"),re={__name:"BrandManagementDetail",setup(c){const u=C(),s=D(),v=_(),p=_(""),y=_(Date.now()),m=_({}),k=E({add:"\u65B0\u589E",edit:"\u4FEE\u6539",view:"\u67E5\u770B"}),B=E([{type:"input",label:"\u54C1\u724C\u540D\u79F0",field:"brandName",placeholder:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",trigger:["blur","change"]}]},{type:"select",label:"\u6240\u5C5E\u7C7B\u578B",field:"brandType",required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u7C7B\u578B",trigger:["blur","change"]}],optionList:[{label:"\u9AD8\u7AEF\u517B\u62A4",value:"1"},{label:"\u9752\u5E74\u517B\u62A4",value:"2"}]},{type:"input",label:"\u54C1\u724C\u8D1F\u8D23\u4EBA",field:"brandLeader",placeholder:"\u8BF7\u8F93\u5165\u54C1\u724C\u8D1F\u8D23\u4EBA"},{type:"textarea",label:"\u54C1\u724C\u63CF\u8FF0",maxLength:500,field:"brandRemark",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F"}]);L(()=>{const{type:a}=s.query||{},{id:t}=s.params||{};["edit","view"].includes(a)&&j({brandId:t}).then(r=>{B.forEach(f=>{f.initValue=r[f.field]}),y.value=Date.now(),p.value=r.imgPath})});const R=()=>{!v.value||v.value.validFields().then(a=>{var t,r;console.log(a),(t=s.params)!=null&&t.id?G({...a,brandId:(r=s.params)==null?void 0:r.id}).then(f=>{n.success("\u4FDD\u5B58\u6210\u529F\uFF01"),m.value={},u.back()}):H({...a,brandId:m.value.attachmentBizId||void 0}).then(f=>{n.success("\u65B0\u589E\u6210\u529F\uFF01"),m.value={},u.back()})})},x=(a,t)=>{a.code!==200?n.error(a.msg):(p.value=URL.createObjectURL(t.raw),m.value=a.data)},q=a=>a.type!=="image/png"?(n.error("\u8BF7\u4E0A\u4F20 .png \u683C\u5F0F\u7684\u56FE\u7247!"),!1):a.size/1024/1024>5?(n.error("\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 5MB!"),!1):!0;return(a,t)=>(i(),b("div",K,[d("div",P,[d("span",null,M(k[e(s).query.type]||k.add)+"\u54C1\u724C",1),o(e(h),{class:"button",onClick:t[0]||(t[0]=r=>e(u).back())},{default:l(()=>[Y]),_:1})]),o(e(V),null,{default:l(()=>[d("div",Q,[d("div",W,[X,o(e(F),{class:"avatar-uploader",data:{attachmentBizTypeEnum:"BRAND_CATEGORY",attachmentBizId:(e(s).params||{}).id},action:e($).upload,"show-file-list":!1,"on-success":x,"before-upload":q,accept:"image/*",disabled:e(s).query.type==="view"},{default:l(()=>[p.value?(i(),b("img",{key:0,src:p.value,class:"avatar"},null,8,Z)):(i(),I(e(A),{key:1,class:"avatar-uploader-icon"},{default:l(()=>[o(e(z))]),_:1}))]),_:1},8,["data","action","disabled"])]),d("div",ee,[(i(),I(T,{formItemList:B,ref_key:"ruleFormRef",ref:v,key:y.value},null,8,["formItemList"]))])])]),_:1}),e(s).query.type!=="view"?(i(),b("div",ae,[o(e(h),{type:"primary",onClick:t[1]||(t[1]=w(r=>R(),["prevent"]))},{default:l(()=>[te]),_:1}),o(e(h),{onClick:t[2]||(t[2]=w(r=>e(u).back(),["prevent"]))},{default:l(()=>[se]),_:1})])):N("",!0)]))}};var he=O(re,[["__scopeId","data-v-d9517938"]]);export{he as default};
