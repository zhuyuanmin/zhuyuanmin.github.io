import{u as $,b1 as Z,r as u,a as _,o as G,b as n,c as y,H as i,J as H,f as s,d,h as o,g as w,i as D,G as K,j as E,b2 as Y,b3 as Q}from"./index.4123b150.js";import{E as O}from"./el-card.4da2fcf1.js";import{E as q,H as W,g as X}from"./el-button.94108e53.js";import{S as F,E as ee}from"./SearchComp.cf0432e5.js";/* empty css                */import{d as te,a as m}from"./api.b5d4f119.js";import{d as S,v as ae,e as re,a as se}from"./data.128cb7bb.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";import"./el-form-item.a6c605e5.js";import"./el-checkbox.39e08c8e.js";import"./el-select.e8a281ab.js";import"./el-popper.ef829556.js";/* empty css                       */const k=f=>(Y("data-v-84d8d518"),f=f(),Q(),f),ie={class:"content-card"},oe={class:"card-header"},de=E("\u8FD4\u56DE"),ue=k(()=>i("div",null,[i("span",null,"\u57FA\u7840\u4FE1\u606F")],-1)),ne=k(()=>i("div",null,[i("span",null,"\u5BA2\u6237\u8BE6\u60C5")],-1)),ce={class:"box"},pe={class:"left"},me=k(()=>i("p",null,"\u8BF7\u4E0A\u4F20\u56FE\u7247",-1)),fe=["src"],ge={class:"right"},he={key:0,class:"btn-bottom-list"},be=E("\u4FDD\u5B58"),ve=E("\u8FD4\u56DE"),_e={__name:"ShopListDetail",setup(f){const z=Object.keys(S[86]).map(a=>({label:S[86][a],value:a})),g=$(),l=Z(),b=u(),v=u(),c=u(""),L=u(Date.now()),I=u(Date.now()),h=u({}),A=_({add:"\u65B0\u589E",edit:"\u4FEE\u6539",view:"\u67E5\u770B"}),R=(a,e)=>a.map(t=>{if(e[t.value]){const r=Object.keys(e[t.value]).map(p=>({label:e[t.value][p],value:p}));return t.children=r,t.children&&t.children.length>0&&R(t.children,e),t}}),P=R(z,S),U=(a,e,t)=>{!e||/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(e)?t():t(new Error(a.message))},N=(a,e,t)=>{/^1[3-9]\d{9}$/.test(e)?t():t(new Error(a.message))};G(()=>{const{type:a}=l.query||{},{id:e}=l.params||{};["edit","view"].includes(a)&&ae({storeId:e}).then(t=>{C.forEach(r=>{r.initValue=t[r.field]}),x.forEach(r=>{r.field==="customArea"?r.initValue=JSON.parse(t[r.field]):r.initValue=t[r.field]}),L.value=Date.now(),I.value=Date.now(),c.value=t.imgPath})});const V=a=>{const{type:e}=a.query||{};let t=[{type:"input",label:"\u5BA2\u6237\u540D\u79F0",field:"customName",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0",required:!0,disabled:e==="view",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0",trigger:["blur","change"]}]},{type:"input",label:"\u8054\u7CFB\u4EBA",field:"storeContact",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",required:!0,disabled:e==="view",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",trigger:["blur","change"]}]},{type:"select",label:"\u6027\u522B",field:"customSex",required:!0,disabled:e==="view",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B",trigger:["blur","change"]}],optionList:[{label:"\u7537",value:1},{label:"\u5973",value:2}]},{type:"input",label:"\u8054\u7CFB\u4EBA\u624B\u673A",field:"storeContactPhoneNum",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u624B\u673A",required:!0,disabled:e==="view",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u624B\u673A",trigger:["blur","change"]},{validator:N.toString(),message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",trigger:"blur"}]},{type:"input",label:"\u5BA2\u6237\u8D26\u53F7",field:"customAccount",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u8D26\u53F7",required:!0,disabled:["edit","view"].includes(e),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u8D26\u53F7",trigger:["blur","change"]}]},{type:"input",label:"\u767B\u5F55\u5BC6\u7801",field:"customLoginPwd",required:!0,disabled:e==="view",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",trigger:["blur","change"]}]},{type:"input",label:"\u767B\u5F55\u7ED1\u5B9A\u624B\u673A",field:"customLoginPhoneNum",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u7ED1\u5B9A\u624B\u673A",required:!0,disabled:["edit","view"].includes(e),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u7ED1\u5B9A\u624B\u673A",trigger:["blur","change"]},{validator:N.toString(),message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",trigger:"blur"}]},{type:"input",label:"\u8054\u7CFB\u90AE\u7BB1",field:"customEmail",disabled:e==="view",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u90AE\u7BB1",rules:[{validator:U.toString(),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u683C\u5F0F",trigger:["blur","change"]}]},{type:"select",label:"\u8BC1\u4EF6\u7C7B\u578B",field:"customIdType",disabled:e==="view",optionList:[{label:"\u8EAB\u4EFD\u8BC1",value:"1"},{label:"\u8425\u4E1A\u6267\u7167",value:"2"}]},{type:"input",label:"\u8BC1\u4EF6\u53F7\u7801",field:"customIdNum",disabled:e==="view",placeholder:"\u8BF7\u8F93\u5165\u8BC1\u4EF6\u53F7\u7801"}];return e==="edit"&&(t=t.filter(r=>r.field!=="password")),t},x=_([{type:"cascade-select",label:"\u6240\u5728\u533A\u57DF",field:"customArea",required:!0,disabled:l.query.type==="view",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5728\u533A\u57DF",trigger:["blur","change"]}],optionList:P},{type:"input",label:"\u8BE6\u7EC6\u5730\u5740",field:"storeAddr",placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",required:!0,disabled:l.query.type==="view",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",trigger:["blur","change"]}]},{type:"textarea",label:"\u8BE6\u60C5\u4ECB\u7ECD",field:"storeDetail",placeholder:"\u8BF7\u8F93\u5165\u4ECB\u7ECD\u4FE1\u606F",maxLength:200,disabled:l.query.type==="view"}]),C=_(V(l)),T=()=>{!b.value||!v.value||b.value.validFields().then(a=>{console.log(a),v.value.validFields().then(e=>{var p,B;console.log(e);const{customArea:t,...r}=e;(p=l.params)!=null&&p.id?re({...a,customArea:JSON.stringify(t),...r,storeId:(B=l.params)==null?void 0:B.id}).then(M=>{m.success("\u4FDD\u5B58\u6210\u529F\uFF01"),h.value={},g.back()}):se({...a,customArea:JSON.stringify(t),...r,storeId:h.value.attachmentBizId||void 0}).then(M=>{m.success("\u65B0\u589E\u6210\u529F\uFF01"),h.value={},g.back()})})})},j=(a,e)=>{a.code!==200?m.error(a.msg):(c.value=URL.createObjectURL(e.raw),h.value=a.data)},J=a=>a.type!=="image/png"?(m.error("\u8BF7\u4E0A\u4F20 .png \u683C\u5F0F\u7684\u56FE\u7247!"),!1):a.size/1024/1024>5?(m.error("\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 5MB!"),!1):(c.value=URL.createObjectURL(a),!0);return(a,e)=>(n(),y("div",ie,[i("div",oe,[i("span",null,H(A[s(l).query.type]||A.add)+"\u95E8\u5E97",1),d(s(q),{class:"button",onClick:e[0]||(e[0]=t=>s(g).back())},{default:o(()=>[de]),_:1})]),d(s(O),null,{header:o(()=>[ue]),default:o(()=>[(n(),w(F,{formItemList:C,ref_key:"ruleFormRef",ref:b,key:L.value},null,8,["formItemList"]))]),_:1}),d(s(O),{class:"card-2"},{header:o(()=>[ne]),default:o(()=>[i("div",ce,[i("div",pe,[me,d(s(ee),{class:"avatar-uploader",data:{attachmentBizTypeEnum:"STORE_CATEGORY",attachmentBizId:(s(l).params||{}).id},action:s(te).upload,"show-file-list":!1,"on-success":j,"before-upload":J,accept:"image/*",disabled:s(l).query.type==="view"},{default:o(()=>[c.value?(n(),y("img",{key:0,src:c.value,class:"avatar"},null,8,fe)):(n(),w(s(X),{key:1,class:"avatar-uploader-icon"},{default:o(()=>[d(s(W))]),_:1}))]),_:1},8,["data","action","disabled"])]),i("div",ge,[(n(),w(F,{formItemList:x,ref_key:"ruleFormRef2",ref:v,key:I.value},null,8,["formItemList"]))])])]),_:1}),s(l).query.type!=="view"?(n(),y("div",he,[d(s(q),{type:"primary",onClick:e[1]||(e[1]=D(t=>T(),["prevent"]))},{default:o(()=>[be]),_:1}),d(s(q),{onClick:e[2]||(e[2]=D(t=>s(g).back(),["prevent"]))},{default:o(()=>[ve]),_:1})])):K("",!0)]))}};var Be=le(_e,[["__scopeId","data-v-84d8d518"]]);export{Be as default};
