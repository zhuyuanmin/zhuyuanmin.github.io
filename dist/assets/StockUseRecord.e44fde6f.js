import{r as s,a as T,u as B,w as F,o as U,b as p,c as k,F as A,d as t,e as j,f as a,g as w,h,i as O,j as V,k as $}from"./index.4123b150.js";import{S as q}from"./SearchComp.cf0432e5.js";import{M as G}from"./ModalSelect.494ae89a.js";import{E as o,a as H}from"./el-table-column.062dd27f.js";import"./el-checkbox.39e08c8e.js";import"./el-tooltip.586473e3.js";import"./el-popper.ef829556.js";import{E as J}from"./el-button.94108e53.js";import{E as K}from"./el-pagination.f696ac85.js";import"./api.b5d4f119.js";import"./el-select.e8a281ab.js";import{E as Q}from"./el-loading.fa21de8e.js";import{f as W}from"./product.3d402efe.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import"./el-form-item.a6c605e5.js";/* empty css                *//* empty css                       */import"./el-dialog.8b796d6a.js";import"./refs.d7d40db4.js";const Y={class:"container"},Z=V("\u67E5\u770B"),ee={__name:"StockUseRecord",setup(te){const x=Q.directive,S=()=>{!v.value||v.value.validFields().then(e=>{d.value=!0,C.value=e.storeId})},_=s([{boxNo:"1AA9918823854A69AAFD1D4498B61DE2",productName:"D\u7CFB\u5217\u6C22\u6DA6\u598D\u4F53\u4EAE\u80A4\u6309\u6469\u971C",productNum:"P14684158926720901131638932605318",brandName:"ODC",batchNo:"B1639535834806",createTime:"2022-08-28 02:35:51",consumeRemainTimes:"4",storeName:"c06998",deviceNo:"odc195335374831617",updater:"\u6210\u5C0F\u6885"}]),P=T([{type:"input",label:"\u4EA7\u54C1\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",field:"productName"},{type:"input",label:"\u4EA7\u54C1\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u7F16\u7801",field:"productNum"},{type:"select",label:"\u6240\u5C5E\u54C1\u724C",field:"brandId",optionList:[{label:"ODC",value:"1"},{label:"\u83B1\u7279\u59AE\u4E1D",value:"2"}]},{type:"date-range",label:"\u6D88\u8017\u65F6\u95F4",field:"consumeTime"},{type:"input",label:"\u8BBE\u5907\u7F16\u53F7",placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u7F16\u53F7",field:"deviceNo"},{type:"select-custom",label:"\u6D88\u8017\u95E8\u5E97",field:"storeId",placeholder:"\u8BF7\u9009\u62E9",onClick:S},{type:"btnList",children:[{text:"\u67E5\u8BE2",type:"submit",onClick:e=>{console.log(e),n.value=1,c({...e,currentPage:1,pageSize:u.value})}},{text:"\u91CD\u7F6E",type:"reset",onClick:()=>{n.value=1,c({currentPage:1,pageSize:u.value})}}]}]),n=s(1),u=s(10),N=s(100),d=s(!1),m=s(!1),y=s({}),C=s(""),v=s(),f=B(),z=f.currentRoute.value,g=s(z),c=e=>{m.value=!0,W(e).then(l=>{const{currentPage:i,pageSize:r,pageCount:b,totalCount:M,pageList:I}=l||{};_.value=I,N.value=M}).finally(()=>{m.value=!1})};F(()=>f.currentRoute.value,e=>{g.value=e}),U(()=>{g.value.fullPath==="/product-management/stock-use-record"&&c({})});const R=e=>{n.value=1,u.value=e,c({currentPage:1,pageSize:e})},E=e=>{n.value=e,c({currentPage:e,pageSize:u.value})},L=(e,l)=>{e&&f.push(`/product-management/stock-use-record/detail/${e.boxNo}`)},D=e=>{const l=e.map(i=>{const{storeId:r,storeName:b}=i;return{label:b,value:r}});y.value={storeId:l}};return(e,l)=>{const i=$("router-view");return p(),k("div",Y,[g.value.fullPath==="/product-management/stock-use-record"?(p(),k(A,{key:0},[t(q,{formItemList:P,data:y.value,ref_key:"searchRef",ref:v},null,8,["formItemList","data"]),t(G,{showModal:d.value,"onUpdate:showModal":l[0]||(l[0]=r=>d.value=r),getStoreList:D,value:C.value},null,8,["showModal","value"]),j((p(),w(a(H),{data:_.value,"max-height":"400",class:"table-class"},{default:h(()=>[t(a(o),{type:"index",label:"\u5E8F\u53F7",width:"100"}),t(a(o),{prop:"boxNo",label:"\u5546\u54C1\u7F16\u7801"}),t(a(o),{prop:"productName",label:"\u4EA7\u54C1\u540D\u79F0"}),t(a(o),{prop:"productNum",label:"\u4EA7\u54C1\u7F16\u7801"}),t(a(o),{prop:"brandName",label:"\u54C1\u724C"}),t(a(o),{prop:"batchNo",label:"\u6279\u6B21"}),t(a(o),{prop:"createTime",label:"\u6D88\u8017\u65F6\u95F4"}),t(a(o),{prop:"consumeRemainTimes",label:"\u5269\u4F59\u6B21\u6570"}),t(a(o),{prop:"storeName",label:"\u6D88\u8017\u95E8\u5E97"}),t(a(o),{prop:"deviceNo",label:"\u8BBE\u5907\u7F16\u53F7"}),t(a(o),{prop:"updater",label:"\u64CD\u4F5C\u4EBA"}),t(a(o),{fixed:"right",label:"\u64CD\u4F5C",width:"100"},{default:h(r=>[t(a(J),{text:"",type:"primary",size:"small",onClick:O(b=>L(r.row),["prevent"])},{default:h(()=>[Z]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[a(x),m.value]]),t(a(K),{class:"class-pagination",currentPage:n.value,"onUpdate:currentPage":l[1]||(l[1]=r=>n.value=r),"page-size":u.value,"onUpdate:page-size":l[2]||(l[2]=r=>u.value=r),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:N.value,onSizeChange:R,onCurrentChange:E},null,8,["currentPage","page-size","total"])],64)):(p(),w(i,{key:1}))])}}};var ye=X(ee,[["__scopeId","data-v-29fea501"]]);export{ye as default};
