import{r as s,a as U,u as j,w as O,o as V,b as p,c as L,F as X,d as a,e as q,f as t,g as h,h as i,i as k,j as m,k as A}from"./index.8adb45b4.js";import{S as G}from"./SearchComp.40a5bd48.js";import{M as H}from"./ModalSelect.95b84c8e.js";import{E as r,a as J}from"./el-table-column.4c8131fd.js";import"./el-checkbox.b7d1d498.js";import"./el-tooltip.586473e3.js";import"./el-popper.18156131.js";import{E as v}from"./el-button.76b5ad27.js";import{E as K}from"./el-pagination.f870b29a.js";import{E as Q,a as W}from"./api.c07297bd.js";import"./el-select.a54b3eea.js";import{E as Y}from"./el-loading.dd11c6e0.js";import{g as Z,d as ee}from"./device.b67cc940.js";import{_ as te}from"./plugin-vue_export-helper.21dcd24c.js";import"./el-form-item.99ad06f6.js";/* empty css                *//* empty css                       */import"./el-dialog.d2d00727.js";import"./refs.71c86f60.js";const ae={class:"container"},le=m("\u5728\u7EBF"),oe=m("\u79BB\u7EBF"),se=m("\u7F16\u8F91"),re=m("\u67E5\u770B"),ie=m("\u5220\u9664"),ne={__name:"DeviceList",setup(ce){const E=Y.directive,P=()=>{!b.value||b.value.validFields().then(e=>{_.value=!0,S.value=e.storeId})},x=s([{deviceOrderNo:"464",deviceTypeName:"\u6B27\u6D32\u4E4B\u661F:\u751F\u547D\u80FD\u91CF\u6297\u8870\u96D5\u5851\u5927\u5E08plus",deviceNo:"odc213668558077953",brandName:"\u6DF1\u5733\u5E02\u6B27\u8FEA\u4E1D\u751F\u7269\u79D1\u6280\u6709\u9650\u516C\u53F8",storeName:"c88888",deviceStatus:1,createTime:"2022-03-14 02:03:32",closeLockTime:"2022-08-14 02:03:32"}]),M=U([{type:"input",label:"\u8BBE\u5907\u7F16\u53F7",field:"deviceNo"},{type:"select",label:"\u8BBE\u5907\u578B\u53F7",field:"deviceTypeName",optionList:[{label:"MEI XIU SI",value:"81"},{label:"\u6B27\u6D32\u4E4B\u661F",value:"80"}]},{type:"select-custom",label:"\u7ED1\u5B9A\u95E8\u5E97",field:"storeId",placeholder:"\u8BF7\u9009\u62E9",onClick:P},{type:"btnList",children:[{text:"\u67E5\u8BE2",type:"submit",onClick:e=>{console.log(e),n.value=1,u({...e,currentPage:1,pageSize:c.value})}},{text:"\u91CD\u7F6E",type:"reset",onClick:()=>{n.value=1,u({currentPage:1,pageSize:c.value})}},{text:"\u7ED1\u5B9A\u8BBE\u5907",style:"primary",onClick:()=>C()}]}]),_=s(!1),y=s(!1),b=s(),z=s({}),S=s(""),n=s(1),c=s(10),N=s(50),g=j(),T=g.currentRoute.value,w=s(T),u=e=>{y.value=!0,Z(e).then(o=>{const{currentPage:f,pageSize:l,pageCount:d,totalCount:F,pageList:$}=o||{};x.value=$,N.value=F}).finally(()=>{y.value=!1})};O(()=>g.currentRoute.value,e=>{w.value=e}),V(()=>{w.value.fullPath==="/net-management/device-list"&&u({})});const I=e=>{n.value=1,c.value=e,u({currentPage:1,pageSize:e})},R=e=>{n.value=e,u({currentPage:e,pageSize:c.value})},D=e=>{const o=e.map(f=>{const{storeId:l,storeName:d}=f;return{label:d,value:l}});z.value={storeId:o}},C=(e,o)=>{console.log(e),e?g.push(`/net-management/device-list/detail/${e.deviceNo}?type=${o}`):g.push("/net-management/device-list/detail")},B=e=>{console.log(e),Q.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u9879\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",draggable:!0,type:"warning"}).then(()=>{ee(e.deviceNo).then(()=>{W.success("\u64CD\u4F5C\u6210\u529F\uFF01"),n.value=1,u({currentPage:1,pageSize:c.value})})},()=>{})};return(e,o)=>{const f=A("router-view");return p(),L("div",ae,[w.value.fullPath==="/net-management/device-list"?(p(),L(X,{key:0},[a(G,{formItemList:M,data:z.value,ref_key:"searchRef",ref:b},null,8,["formItemList","data"]),a(H,{showModal:_.value,"onUpdate:showModal":o[0]||(o[0]=l=>_.value=l),getStoreList:D,value:S.value},null,8,["showModal","value"]),q((p(),h(t(J),{data:x.value,"max-height":"400",class:"table-class"},{default:i(()=>[a(t(r),{prop:"deviceOrderNo",label:"\u5E8F\u53F7",width:"100"}),a(t(r),{prop:"deviceTypeName",label:"\u8BBE\u5907\u578B\u53F7"}),a(t(r),{prop:"deviceNo",label:"\u8BBE\u5907\u7F16\u53F7"}),a(t(r),{prop:"brandName",label:"\u54C1\u724C\u5546",width:"100"}),a(t(r),{prop:"storeName",label:"\u7ED1\u5B9A\u95E8\u5E97"}),a(t(r),{prop:"deviceStatus",label:"\u72B6\u6001"},{default:i(l=>[l.row.deviceStatus===1?(p(),h(t(v),{key:0,type:"success",plain:"",size:"small"},{default:i(()=>[le]),_:1})):(p(),h(t(v),{key:1,type:"danger",plain:"",size:"small"},{default:i(()=>[oe]),_:1}))]),_:1}),a(t(r),{prop:"createTime",label:"\u51FA\u5382\u65F6\u95F4",width:"180"}),a(t(r),{prop:"closeLockTime",label:"\u4E0B\u7EBF\u65F6\u95F4",width:"180"}),a(t(r),{fixed:"right",label:"\u64CD\u4F5C",width:"150"},{default:i(l=>[a(t(v),{text:"",type:"primary",size:"small",onClick:k(d=>C(l.row,"edit"),["prevent"])},{default:i(()=>[se]),_:2},1032,["onClick"]),a(t(v),{text:"",type:"primary",size:"small",onClick:k(d=>C(l.row,"view"),["prevent"])},{default:i(()=>[re]),_:2},1032,["onClick"]),a(t(v),{text:"",type:"danger",size:"small",onClick:k(d=>B(l.row),["prevent"])},{default:i(()=>[ie]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[t(E),y.value]]),a(t(K),{class:"class-pagination",currentPage:n.value,"onUpdate:currentPage":o[1]||(o[1]=l=>n.value=l),"page-size":c.value,"onUpdate:page-size":o[2]||(o[2]=l=>c.value=l),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:N.value,onSizeChange:I,onCurrentChange:R},null,8,["currentPage","page-size","total"])],64)):(p(),h(f,{key:1}))])}}};var Ee=te(ne,[["__scopeId","data-v-7e6507c0"]]);export{Ee as default};
