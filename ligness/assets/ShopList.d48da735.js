import{r,a as Q,u as W,w as X,o as Z,b as y,c as F,F as ee,d as a,e as te,f as t,g as M,h as s,H as v,J as L,i as N,C as ae,j as m,k as oe}from"./index.8adb45b4.js";import{S as R,d as le}from"./SearchComp.40a5bd48.js";import{E as n,a as se}from"./el-table-column.4c8131fd.js";import"./el-checkbox.b7d1d498.js";import"./el-tooltip.586473e3.js";import"./el-popper.18156131.js";import{E as f,g as re,k as ne}from"./el-button.76b5ad27.js";import{E as ie}from"./el-pagination.f870b29a.js";import{a as ue}from"./api.c07297bd.js";import"./el-select.a54b3eea.js";import{E as ce}from"./el-switch.146bd39b.js";import{E as de,a as pe,b as A}from"./el-dropdown-menu.ad28fb09.js";/* empty css                */import{E as me}from"./el-dialog.d2d00727.js";import{E as ge}from"./el-form-item.99ad06f6.js";import{E as ve}from"./el-loading.dd11c6e0.js";import{g as fe,e as he,d as z}from"./data.c21570a6.js";import{_ as _e}from"./plugin-vue_export-helper.21dcd24c.js";/* empty css                       */import"./refs.71c86f60.js";const ye={class:"container"},we=m("\u7F16\u8F91"),Ce=m("\u67E5\u770B"),be={class:"el-dropdown-link"},Se=m(" \u66F4\u591A "),ke=m("\u4FEE\u6539\u5BC6\u7801"),Ee=m("\u4FEE\u6539\u767B\u5F55\u624B\u673A\u53F7"),Pe={class:"content"},Le={class:"dialog-footer"},ze=m("\u53D6\u6D88"),xe=m("\u786E\u5B9A"),Ie={__name:"ShopList",setup($e){const V=ve.directive,x=r([]),B=(e,o,d)=>{/^1[3-9]\d{9}$/.test(o)?d():d(new Error(e.message))},T=Q([{type:"input",label:"\u95E8\u5E97\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u540D\u79F0",field:"customName"},{type:"input",label:"\u8054\u7CFB\u4EBA",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",field:"storeContact"},{type:"input",label:"\u8D26\u53F7/\u624B\u673A\u53F7",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7/\u624B\u673A\u53F7",field:"customAccount"},{type:"btnList",children:[{text:"\u67E5\u8BE2",type:"submit",onClick:e=>{console.log(e),i.value=1,g({...e,currentPage:1,pageSize:u.value})}},{text:"\u91CD\u7F6E",type:"reset",onClick:()=>{i.value=1,g({currentPage:1,pageSize:u.value})}},{text:"\u65B0\u589E",style:"primary",onClick:()=>P()}]}]),I=[{type:"password",label:"\u65B0\u5BC6\u7801",field:"customLoginPwd",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",trigger:["blur","change"]}]},{type:"input",label:"\u65B0\u767B\u5F55\u624B\u673A\u53F7",field:"customLoginPhoneNum",placeholder:"\u8BF7\u8F93\u5165\u65B0\u767B\u5F55\u624B\u673A\u53F7",required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u767B\u5F55\u624B\u673A\u53F7",trigger:["blur","change"]},{validator:B.toString(),message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",trigger:"blur"}]}],i=r(1),u=r(10),$=r(100),w=r(!1),h=W(),c=r(!1),_=r(""),C=r(),b=r(""),S=r([]),k=r({}),q=h.currentRoute.value,E=r(q),g=e=>{w.value=!0,fe(e).then(o=>{const{currentPage:d,pageSize:l,pageCount:p,totalCount:G,pageList:K}=o||{};x.value=K,$.value=G}).finally(()=>{w.value=!1})},D=e=>{he(e.storeId?{storeId:e.storeId,storeStatus:e.storeStatus===0?1:0,refreshFlag:!1}:{...e,storeId:k.value.storeId,refreshFlag:!!e.customLoginPwd}).then(o=>{ue.success("\u64CD\u4F5C\u6210\u529F\uFF01"),i.value=1,g({currentPage:1,pageSize:u.value})})};X(()=>h.currentRoute.value,e=>{E.value=e}),Z(()=>{E.value.fullPath==="/customer-management/shop-list"&&g({})});const U=e=>{const o=JSON.parse(e),d=z[86][o[0]],l=z[o[0]][o[1]],p=z[o[1]][o[2]];return`${d} ${l} ${p}`},Y=e=>{i.value=1,u.value=e,g({currentPage:1,pageSize:e})},j=e=>{i.value=e,g({currentPage:e,pageSize:u.value})},P=(e,o)=>{console.log(e),e?h.push(`/customer-management/shop-list/detail/${e.storeId}?type=${o}`):h.push("/customer-management/shop-list/detail")},H=()=>{!C.value||C.value.validFields().then(e=>{console.log(e),c.value=!1,D(e)})},J=e=>{k.value=e,c.value=!0,_.value="\u4FEE\u6539\u5BC6\u7801",b.value=e.customAccount,S.value=I.slice(0,1)},O=e=>{k.value=e,c.value=!0,_.value="\u4FEE\u6539\u767B\u5F55\u624B\u673A\u53F7",b.value=e.customAccount,S.value=I.slice(1,2)};return(e,o)=>{const d=oe("router-view");return y(),F("div",ye,[E.value.fullPath==="/customer-management/shop-list"?(y(),F(ee,{key:0},[a(R,{formItemList:T},null,8,["formItemList"]),te((y(),M(t(se),{data:x.value,"max-height":"400",class:"table-class"},{default:s(()=>[a(t(n),{type:"index",label:"\u7F16\u53F7",width:"100"}),a(t(n),{prop:"customAccount",label:"\u8D26\u53F7"}),a(t(n),{prop:"customName",label:"\u95E8\u5E97\u540D\u79F0"}),a(t(n),{prop:"customArea",label:"\u6240\u5728\u5730\u533A"},{default:s(l=>[v("span",null,L(U(l.row.customArea)),1)]),_:1}),a(t(n),{prop:"storeContact",label:"\u8054\u7CFB\u4EBA"}),a(t(n),{prop:"customLoginPhoneNum",label:"\u767B\u5F55\u624B\u673A\u53F7"}),a(t(n),{prop:"createTime",label:"\u66F4\u65B0\u65F6\u95F4"},{default:s(l=>[v("span",null,L(t(le)(l.row.updateTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),a(t(n),{prop:"storeStatus",label:"\u542F\u7528\u72B6\u6001"},{default:s(l=>[a(t(ce),{"model-value":l.row.storeStatus===1,onChange:p=>D(l.row)},null,8,["model-value","onChange"])]),_:1}),a(t(n),{fixed:"right",label:"\u64CD\u4F5C",width:"150"},{default:s(l=>[a(t(f),{text:"",type:"primary",size:"small",onClick:N(p=>P(l.row,"edit"),["prevent"])},{default:s(()=>[we]),_:2},1032,["onClick"]),a(t(f),{text:"",type:"primary",size:"small",onClick:N(p=>P(l.row,"view"),["prevent"])},{default:s(()=>[Ce]),_:2},1032,["onClick"]),a(t(f),{text:"",type:"danger",size:"small"},{default:s(()=>[a(t(de),null,{dropdown:s(()=>[a(t(pe),null,{default:s(()=>[a(t(A),{onClick:p=>J(l.row)},{default:s(()=>[ke]),_:2},1032,["onClick"]),a(t(A),{onClick:p=>O(l.row)},{default:s(()=>[Ee]),_:2},1032,["onClick"])]),_:2},1024)]),default:s(()=>[v("span",be,[Se,a(t(re),{class:"el-icon--right"},{default:s(()=>[a(t(ne))]),_:1})])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[t(V),w.value]]),a(t(ie),{class:"class-pagination",currentPage:i.value,"onUpdate:currentPage":o[0]||(o[0]=l=>i.value=l),"page-size":u.value,"onUpdate:page-size":o[1]||(o[1]=l=>u.value=l),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:$.value,onSizeChange:Y,onCurrentChange:j},null,8,["currentPage","page-size","total"]),a(t(me),{modelValue:c.value,"onUpdate:modelValue":o[4]||(o[4]=l=>c.value=l),title:_.value,width:"40%","custom-class":"modal-class-store",onClose:o[5]||(o[5]=l=>c.value=!1),"append-to-body":"","destroy-on-close":"",draggable:""},{footer:s(()=>[v("span",Le,[a(t(f),{onClick:o[2]||(o[2]=l=>c.value=!1)},{default:s(()=>[ze]),_:1}),a(t(f),{type:"primary",onClick:o[3]||(o[3]=l=>H())},{default:s(()=>[xe]),_:1})])]),default:s(()=>[v("div",Pe,[a(t(ge),{class:ae(_.value==="\u4FEE\u6539\u5BC6\u7801"?"label-80":"label-120"),label:"\u8D26\u53F7\uFF1A"},{default:s(()=>[v("span",null,L(b.value),1)]),_:1},8,["class"]),a(R,{formItemList:S.value,ref_key:"dialogRef",ref:C},null,8,["formItemList"])])]),_:1},8,["modelValue","title"])],64)):(y(),M(d,{key:1}))])}}};var Xe=_e(Ie,[["__scopeId","data-v-78904aec"]]);export{Xe as default};
